{% extends 'base.html' %}
{% block content %}
  {% if logged_in %}
    <h2>API Key</h2>
    <p>Your API key is: {{ logged_in.api_key }}</p>
    <p>Do not share this with anyone.</p>
  {% endif %}
  <h2>API Documentation</h2>
  <p>Requests are rate-limited at 50 requests per second.</p>
  <table>
    <tr><th>Endpoint</th><th>URL Parameters</th><th>Description</th><th>Example Responses</th></tr>
    <tr><th>/new_user</th><td></td><td>Generates a new API key.</td><td><pre>{"api_key": "iQtxykjG48y3F9A93jRPqC"}</pre></td></tr>
    <tr><th>/order_book</th><td><ul><li>market</li></ul></td><td>Gets the order book for <u>market</u>.</td><td>
  <pre>[{
  "volume":"0.010000000000000000",
  "executed": "0.000000000000000000",
  "price":"0.010000000000000000",
  "type":"buy"
}]</pre></td></tr>
    <tr><th>/balances</th><td><ul><li>api_key</li></ul></td><td>Gets the balances for both XMR and BTC.</td>
      <td><pre>{"XMR": "0E-18", "BTC": "0E-18"}</pre></td></tr>
      <tr><th>/orders</th><td><ul><li>api_key</li><li>market</li></ul></td><td>Gets a list of your open orders in <u>market</u>.</td>
      <td>
  <pre>[{
  "volume":"0.010000000000000000",
  "executed": "0.000000000000000000",
  "id":1,
  "price":"0.010000000000000000",
  "type":"buy"
}]</pre></td></tr>
    <tr><th>/trades</th><td><ul><li>api_key</li><li>market</li></ul></td><td>Gets a list of the trades you have made in <u>market</u>.</td>
      <td>
  <pre>[{
  "volume":"0.010000000000000000",
  "fee":"0.0000002000",
  "price":"0.010000000000000000",
  "timestamp": 1673138672,
  "type":"buy"
}]</pre></td></tr>
    <tr><th>/deposit</th><td><ul><li>api_key</li><li>asset</li></ul></td><td>Gets a deposit address for <u>asset</u>.</td><td><pre>{"address": "bc1qh5jnz3tjtvththmd0sjru5sq97p8e9qj9mm794"}</pre></td></tr>
    <tr><th>/withdraw</th><td><ul><li>api_key</li><li>asset</li><li>amount</li></ul></td>
      <td>Withdraws <u>amount</u> of <u>asset</u> to <u>address</u>. Total withdrawn is <u>amount</u>-<u>withdrawal fee</u>.</td><td><pre>{"success": true}</pre></td></tr>
    <tr><th>/buy</th><td><ul><li>api_key</li><li>market</li><li>volume</li><li>price</li></ul></td>
      <td>Creates an order to buy <u>volume</u> of base asset in <u>market</u> at <u>price</u> or below.<br/>Returns the <u>order_id</u>, or success if the order was filled.</td><td><pre>{"order_id": 1}</pre><pre>{"success": true}</td></tr>
    <tr><th>/sell</th><td><ul><li>api_key</li><li>market</li><li>volume</li><li>price</li></ul></td>
      <td>Creates an order to sell <u>volume</u> of base asset in <u>market</u> at <u>price</u> or above.<br/>Returns the <u>order_id</u>, or success if the order was filled.</td><td><pre>{"order_id": 2}</pre><pre>{"success": true}</pre></td></tr>
    <tr><th>/cancel</th><td><ul><li>api_key</li><li>order_id</li></td><td>Cancels an order.</td><td><pre>{"success": true}</pre></td></tr>
  </table>
  <h2>Assets</h2>
  <table>
    <tr><td>BTC</td></tr>
    <tr><td>XMR</td></tr>
  </table>
  <h2>Markets</h2>
  <table>
    <tr><td>XMRBTC</td></tr>
  </table>
{% endblock %}
